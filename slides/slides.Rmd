---
title: "How Threats Shape the Politics of Marginalized: Evidence from a Natural Experiment and Machine Learning"
subtitle: "Prepared for ... "
author: "Jae Yeon Kim (UC Berkeley)"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  xaringan::moon_reader:
    css: custom.css
    lib_dir: libs
    nature:
      slideNumberFormat: '%current%' 
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  fig.showtext = TRUE,
  fig.width = 16, 
  fig.height = 8, 
  dpi = 300
)


# Import libraries 

pacman::p_load(
        tidyverse, # the tidyverse framework 
        splitstackshape, # stacking and reshaping datasets 
        tsModel, # specifying time series regression models
        lmtest, # testing linear regression models
        Epi, # statistical analysis in epidemiology 
        splines, # spline regression
        vcd, # visualizing categorical variable 
        nlme, # linear and nonlinear mixed effects models 
        zoo, # S3 infrastructure regular and irregular time series 
        simpleboot, # bootstrapping 
        TTR, # constructing technical trading rules
        ggpmisc, # detecting peaks and valleys 
        broom, # tidying model objects 
        modelr, # modeling 
        forecast, # forecasting 
        ggseas, # seasonal and decomposition on the fly
        itsadug, # interpreting time series and autocorrelated data 
        mgcv, # mixed GAM Computation Vehicle with Automatic Smoothness Estimation
        tseries, # computational financial analysis
        mcp, # regression with multiple change points
        lawstat, # testing stats in biostat, public policy, and law
        sarima, # simulation and prediction with seasonal ARIMA models  
        car, # Durbin Watson test 
        tidyr, # tidying messy daa 
        AICcmodavg, # computing predicted values and standard errors 
        MuMIn, # selecting models
        ggthemes, # fancy ggplot themes
        ggpubr, # arranging plots 
        stargazer, # regression table 
        here, # reproducibility 
        patchwork, # rearranging ggplot 
        kableExtra) # table formatting

# devtools::install_github("jaeyk/makereproducible")
library(makereproducible)

# Import R scripts

script_list <- list.files(paste0(here::here(), "/functions"),
  pattern = "*.r|*.R",
  full.names = TRUE
)

for (i in 1:length(script_list))
{
  source(script_list[[i]])
}

# for publication-friendly theme
theme_set(theme_pubr())
```

```{r xaringan-themer, include=FALSE, warning=FALSE}

library(xaringanthemer)

style_mono_accent(
  base_color = "#23395b",
  header_font_google = google_font("Josefin Sans"),
  text_font_google   = google_font("Montserrat", "300", "300i"),
  code_font_google   = google_font("Fira Mono")
  
)

```

```{r, load_refs, include=FALSE, cache=FALSE}

library(RefManageR)

BibOptions(check.entries = FALSE,
           bib.style = "authoryear",
           cite.style = "alphabetic",
           style = "markdown",
           hyperlink = FALSE,
           dashed = FALSE)

myBib <- ReadBib("sample.bib", check = FALSE)
```

# Data availability and social science research 

![](https://axispraxis.files.wordpress.com/2016/03/muttjeff01.jpg?w=800)

The streetlight effect: **data availability** constrains the **scope** of research **questions** and **methods**. 

---

# Quantitative research on marginalized populations 

Using **quantitative methods**, it's ...

* **Relatively easy** to assess how the majority group is **biased** against minority groups

* **Relatively difficult** to investigate how minority groups **experience** and **internalize bias**

---

# Current options and their limitations 

1. Qualitative research: generalizability

2. Survey research: temporal scope and group heterogeneity

3. Experimental research: snapshots and artificial treatments

---

# Main challenge

* How can we do a 1) **large-scale**, 2) **well-designed**, and 3) **efficient** observational study on marginalized populations?

---

# ML and automation

1. Machine learning enables data-intensive research on marginalized populations. (You can think of a prediction as part of the complex research design.)

2. Automating research process helps increase research transparency, reproducibility, and scalability.

---

# 9/11 as a natural experiment 


.pull-left[
![](https://images.theconversation.com/files/234736/original/file-20180904-41720-xwahre.jpg?ixlib=rb-1.1.0&q=45&auto=format&w=496&fit=clip) September 11 attacks]

.pull-right[
* Exogenous shock -> Interrupted time series design 

* Caveat: Time is not random.
]
---

# 9/11 as a natural experiment 

![](lit_review.png)
]

---

# Threats and information seeking 

![](https://www.aljazeera.com/wp-content/uploads/2015/12/dc5d4b98b6bd4228a01a3ef8b4daedbf_18.jpeg?fit=1000%2C562)

---

# Ethnic newspaper as an alternative data source 

![](arab_american_news.png)

---

# Data sources 

Data source: Ethnic NewsWatch database (**2.5 million** articles collected over the last **four decades**)

Raw data: 1,132 **Arab** and 4,552 **Indian American** newspaper articles mentioning **Muslims** published between **1996 and 2006**

---

# Argument

* Threats -> information seeking (measured by the demand for a specific type of news reports) (Valentino et al. 2008; Albertson and Gadarian 2015)

* Post-9.11: state surveillance + negative media reporting + xenophobic pubic opinion -> gathering information on the political treatment of Muslims in the U.S.

```{r include = FALSE}
Citep(bib = myBib, 
      key =  c("valentino2008worried","albertson2015anxious"))
```

---

# Research question and outcome measures 

**Q**: When immigrant communities become more interested in U.S. domestic rather than home country politics?

**DV**: The Muslim related articles: Domestic politics (e.g., War on Terrorism) + International politics (e.g., territorial disputes)

---

# Hypotheses

**H1** (domestic politics): The September 11 attacks made Arab American and Indian American newspapers publish more articles on U.S. political news related to Muslim communities in the post-9/11 period than in previous years. (**Large and significant effect.**)

---

# Hypotheses 

**H2** (international politics: Arab American and Indian American newspapers published more articles on Muslim populations outside than inside the U.S. in the post-9/11 period than in the pre-intervention period. (**Small and insignificant effect**)

---


# Workflow 

* Step 1: Digital (text) data collection 

* Step 2: Training algorithms (classifiers) 

* Step 3: Automated text classification 

* Step 4: Interrupted time series design analysis 

---

# What raw data look like 

![](raw_data.png)

---

# How to parse text data 

$$
\begin{equation}
\label{equation1}
Y_{t} = \beta_{0} + \beta_{1}\textrm{Intervention} + \beta_{2}{Date}_{t} + \beta_{3}\textrm{Group} + \epsilon
\end{equation}
$$

```{r include = FALSE}

df <- read_csv(make_here("/home/jae/ITS-Text-Classification/processed_data/df.csv"))

df[,-1] %>%
  select(domestic, everything()) %>%
  slice(1:6) %>%
  knitr::kable('html')
```

---

# Automating data wrangling process

* Developed an [R package]( https://jaeyk.github.io/tidyethnicnews/) for turning Ethnic NewsWatch search results into tidy dataframe

* The package took average 0.0005 seconds to parse 100 newspaper articles (it took only 12.34 seconds to parse 5,684 articles for this research).

---

# Labeling articles = prediction problem 
1. Annotators (two authors + three RAs) label 1,015 articles (18% of the total data).

2. Machines learn how to label articles using the human-labeled articles (training).

3. Algorithms (classifiers) label the rest of the articles.  

---

# Machine learning approach 

- Used Lasso (Least Absolute Shrinkage and Selection Operator). Or OLS + penalty for the sum of the absolve coefficients of the model parameters (i.e., terms).

- Reasonable because (1) text data is high-dimensional and (2) the pattern could be explained by few key terms (simpler + faster). 

---

# Machine learning performance 

* Accuracy (overall performance): 73%

* Precision (aka positive predictive value): 75%

* Recall (aka true positive rate): 80%

Replication code is available at https://github.com/jaeyk/ITS-Text-Classification

---

# Relative word frequency 

![](https://github.com/jaeyk/ITS-Text-Classification/raw/master/output/relative_word_freq.png)

---

.pull-left[ **Raw data**
<img src="https://github.com/jaeyk/ITS-Text-Classification/raw/master/output/cleaned_data_plot.png" height = "500"/>]

.pull-right[ **ITS design**
<img src="https://github.com/jaeyk/ITS-Text-Classification/raw/master/output/its_base_plot.png" height = "500"/>]

---

.pull-left[ **Placebo test**
<img src="https://github.com/jaeyk/ITS-Text-Classification/raw/master/output/its_base_placebo_plot.png" height = "500"/>]

.pull-right[ **GLS model**
<img src="https://github.com/jaeyk/ITS-Text-Classification/raw/master/output/its_adjusted_plot.png" height = "500"/>]

---

# Regression table 

![](gls_out.png)

---

# Research pipeline 

1. Mining text data + applying ML (1 forthcoming, 2 under review papers)

2. Building original organizational data + combining with other data sources (1 published and 1 R&R) 

---

# Research software 

* All of my research projects are computationally reproducible and available on the GitHub. 

* These computational projects produce 1) research articles, 2) open-source research software, and 3) large-scale original datasets. 

* I developed and maintain two R packages that help researchers collecting large text data at scale.

---

# Current research focus 

Mapping the Modern Agora project (with [Hahrie Han](https://politicalscience.jhu.edu/directory/hahrie-han/) and [Milan de Vries](https://www.linkedin.com/in/milan-de-vries-567b7376) at P3 Lab at the SNF Agora Institute at JHU):

Creating big data infrastructure for investing political organizing in the US based on more than 3 million tax reports.

---

# Conclusions 

* Using big & complex data + ML + other methods for solving social problems 

* Conducting data-intensive research on the politics of marginalized groups 

* Analyzing how people organize, respond to and change policies 

---

# References

```{r refs1, echo=FALSE, results="asis"}

PrintBibliography(myBib)

```

---
# Appendix A Ethnic NewsWatch Datbase 

![](enw_db1.png)

---

# Appendix A Ethnic NewsWatch Datbase 

![](enw_db2.png)

---

# Appendix B Autocorrelation test

![](acf.png)

---

# Appendix C Newspaper source analysis

![](source_a.png)

---

# Appendix C Newspaper source analysis

![](source_b.png)

---

# Appendix C Newspaper FE

![](source_fe.png)

---

# Appendix D OLS

![](ols_out.png)

---

# Appendix E Duration effect analysis 

![]
