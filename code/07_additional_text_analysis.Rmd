---
title: "Additional text analysis"
author: "Jae Yeon Kim"
output:
html_document:
  toc: True
  theme: united
  number_sections: True
---

# Setup

```{r}
if (!require("pacman")) install.packages("pacman")
pacman::p_load(
        tidyverse, # the tidyverse framework
        ggpubr, # arranging ggplots
        ggthemes, # fancy ggplot themes
        tidytext, # tidytext
        patchwork, # arranging images,
        purrr, # functional programming
        here, # reproducibility
        httr, # httr connection 
        jsonlite, # parsing JSON
        glue, # gluing objects and strings         
        rio # import and export files  
)

devtools::install_github("jaeyk/rnytapi", dependencies = TRUE)
```

# Collecting data using the NYT API

```{r}
#Sys.setenv(nyt_key = "<insert key>")
key <- Sys.getenv("nyt_key")

# Parameters 

begin_date <- "19960911"
end_date <- "20060911"
term <- "muslim+muslims"

df <- extract_all(term, begin_date, end_date, key)

export(df, file = here("processed_data/nyt_articles.rds"))
```

# Extract and export R code 

```{r eval=FALSE}
knitr::purl(input = here("code", "07_additional_text_analysis.Rmd"), 
            output = here("code", "07_additional_text_analysis.r"))
```

